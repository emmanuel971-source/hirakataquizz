<!DOCTYPE html>
<html>
<body>
  <button id="start">Démarrer reconnaissance</button>
  <p id="status">—</p>

  <script>
    const btn = document.getElementById('start');
    const status = document.getElementById('status');

    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
    if (!SpeechRecognition) {
      status.textContent = "API non supportée";
      return;
    }

    const rec = new SpeechRecognition();
    rec.lang = 'fr-FR';  // ← change en 'ja-JP' après si ça marche

    btn.onclick = () => {
      status.textContent = "Démarrage...";
      try {
        rec.start();
        status.textContent = "Écoute démarrée ! Parle...";
      } catch(e) {
        status.textContent = "Erreur : " + e.message;
      }
    };

    rec.onstart = () => status.textContent = "→ ONSTART (micro actif)";
    rec.onend   = () => status.textContent = "→ Fin d'écoute";
    rec.onerror = e => status.textContent = "→ ERREUR : " + e.error;
    rec.onresult = e => status.textContent = "→ Résultat : " + e.results[0][0].transcript;
  </script>
</body>
</html>
